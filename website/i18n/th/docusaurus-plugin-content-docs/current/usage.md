---
id: usage
title: 'การใช้งาน'
sidebar_label: 'การใช้งาน'
---

---

## วิธีใช้งาน {#usage}

- กดตอบกลับ แล้วส่วนเสริมจะเพิ่มไฟล์ต้นฉบับให้อัตโนมัติ — หรือจะถามยืนยันก่อน หากเปิดใช้งานไว้ในตัวเลือก
- ป้องกันไฟล์ซ้ำตามชื่อไฟล์; ข้ามส่วน S/MIME เสมอ ภาพแทรก (inline) จะถูกกู้คืนในเนื้อความของอีเมลตอบกลับตามค่าเริ่มต้น (ปิดได้ผ่าน "Include inline pictures" ในตัวเลือก)
- ไฟล์แนบที่อยู่ในบัญชีดำจะถูกข้ามเช่นกัน (รูปแบบ glob ที่ไม่สนตัวพิมพ์เล็ก/ใหญ่ จับคู่เฉพาะชื่อไฟล์ ไม่ใช่พาธ) ดู [การตั้งค่า](configuration#blacklist-glob-patterns)

---

### สิ่งที่เกิดขึ้นเมื่อกดตอบกลับ {#what-happens}

- ตรวจจับการตอบกลับ → แสดงรายการไฟล์แนบต้นฉบับ → กรอง S/MIME + inline → ยืนยัน (ถ้ามี) → เพิ่มไฟล์ที่เข้าเกณฑ์ (ข้ามไฟล์ซ้ำ) → กู้คืนภาพแบบ inline ในเนื้อความ

รอบแบบเข้มงวดเทียบกับแบบผ่อนคลาย: ส่วนเสริมจะตัดส่วน S/MIME และ inline ออกจากไฟล์แนบก่อน หากไม่มีอะไรเข้าเกณฑ์ จะรันรอบแบบผ่อนคลายที่ยังคงตัด S/MIME/inline แต่ยอมรับกรณีได้มากขึ้น (ดูรายละเอียดโค้ด) ภาพแบบ inline จะไม่มีวันถูกเพิ่มเป็นไฟล์แนบ; แทนที่จะเป็นเช่นนั้น เมื่อเปิด "Include inline pictures" (ค่าเริ่มต้น) ภาพจะถูกฝังลงในเนื้อความของการตอบกลับโดยตรงเป็น base64 data URI

| Part type                                           |                  Strict pass |                 Relaxed pass |
| --------------------------------------------------- | ---------------------------: | ---------------------------: |
| ไฟล์ลายเซ็น S/MIME `smime.p7s`                      |                       ไม่รวม |                       ไม่รวม |
| ชนิด MIME ของ S/MIME (`application/pkcs7-*`)        |                       ไม่รวม |                       ไม่รวม |
| ภาพแบบ inline ที่อ้างอิงด้วย Content‑ID (`image/*`) | ไม่รวม (กู้คืนในเนื้อความ\*) | ไม่รวม (กู้คืนในเนื้อความ\*) |
| อีเมลแนบ (`message/rfc822`) ที่มีชื่อไฟล์           |                  ไม่ถูกเพิ่ม |                  อาจถูกเพิ่ม |
| ไฟล์แนบทั่วไปที่มีชื่อไฟล์                          |                  อาจถูกเพิ่ม |                  อาจถูกเพิ่ม |

\* เมื่อ "Include inline pictures" เปิดอยู่ (ค่าเริ่มต้น: เปิด) ภาพแบบ inline จะถูกฝังในเนื้อความของการตอบกลับเป็น base64 data URI แทนการเพิ่มเป็นไฟล์แนบ ดู [การตั้งค่า](configuration#include-inline-pictures).

ตัวอย่าง: ไฟล์แนบบางรายการอาจไม่มีส่วนหัวบางชนิด แต่ยังคงเป็นไฟล์ปกติ (ไม่ใช่ inline/S/MIME) หากรอบแบบเข้มงวดไม่พบอะไร รอบแบบผ่อนคลายอาจยอมรับและแนบไฟล์เหล่านั้น

---

### การอ้างอิงข้าม {#cross-reference}

- การส่งต่อ (Forward) จะไม่ถูกแก้ไขโดยตั้งใจไว้ (ดูข้อจำกัดด้านล่าง)
- สำหรับเหตุผลที่อาจไม่ได้เพิ่มไฟล์แนบ ดู “เหตุใดไฟล์แนบอาจไม่ได้ถูกเพิ่ม”

---

## รายละเอียดพฤติกรรมการทำงาน {#behavior-details}

- **การป้องกันความซ้ำ:** ส่วนเสริมจะทำเครื่องหมายแท็บเขียนอีเมลว่าได้ประมวลผลแล้ว โดยใช้ค่าซเซสชันต่อแท็บและตัวป้องกันในหน่วยความจำ จึงจะไม่เพิ่มไฟล์ต้นฉบับซ้ำสองครั้ง
- การปิดและเปิดหน้าต่างเขียนอีเมลใหม่จะถือเป็นแท็บใหม่ (กล่าวคือ อนุญาตให้พยายามใหม่ได้)
- **เคารพไฟล์แนบที่มีอยู่:** หากในหน้าต่างเขียนอีเมลมีไฟล์แนบอยู่แล้ว ระบบยังคงเพิ่มไฟล์ต้นฉบับเพียงหนึ่งครั้ง โดยข้ามชื่อไฟล์ที่มีอยู่แล้ว
- **การยกเว้น:** ส่วนของ S/MIME และภาพแบบ inline จะถูกยกเว้นไม่ให้อยู่ในไฟล์แนบ หากรอบแรกไม่พบสิ่งที่เข้าเกณฑ์ จะมีการตรวจทานซ้ำแบบผ่อนคลายสำหรับส่วนที่ไม่ใช่ S/MIME ภาพแบบ inline จัดการแยกต่างหาก: จะถูกกู้คืนในเนื้อความของการตอบกลับเป็น data URI (เมื่อเปิดใช้งาน)
  - **ชื่อไฟล์:** `smime.p7s`
  - **ชนิด MIME:** `application/pkcs7-signature`, `application/x-pkcs7-signature`, `application/pkcs7-mime`
  - **ภาพแบบ inline:** ส่วน `image/*` ใด ๆ ที่อ้างอิงด้วย Content‑ID — จะถูกยกเว้นจากไฟล์แนบ แต่ฝังในเนื้อความของการตอบกลับเมื่อ "Include inline pictures" เปิดอยู่
  - **อีเมลที่แนบมา (`message/rfc822`):** จะถือเป็นไฟล์แนบปกติหากมีชื่อไฟล์; อาจถูกเพิ่ม (ขึ้นกับการตรวจสอบความซ้ำและบัญชีดำ)
- **คำเตือนบัญชีดำ (หากเปิดใช้งาน):** เมื่อผู้เข้าข่ายถูกยกเว้นโดยบัญชีดำของคุณ,
  ส่วนเสริมจะแสดงโมดัลขนาดเล็กพร้อมรายการไฟล์ที่ได้รับผลกระทบและรูปแบบ
  ที่ตรงกัน คำเตือนนี้จะปรากฏขึ้นในกรณีที่ไม่มีไฟล์แนบใด ๆ ถูกเพิ่ม
  เพราะทุกอย่างถูกยกเว้นไปแล้ว

---

## ปุ่มลัดแป้นพิมพ์ {#keyboard-shortcuts}

- กล่องยืนยัน: Y/J = ตกลง, N/Esc = ไม่; Tab/Shift+Tab และปุ่มลูกศรใช้เลื่อนโฟกัสวน
  - ค่า “Default answer” ใน [การตั้งค่า](configuration#confirmation) กำหนดปุ่มที่โฟกัสเริ่มต้น
  - ปุ่ม Enter สั่งกดปุ่มที่โฟกัสอยู่ Tab/Shift+Tab และปุ่มลูกศรใช้ย้ายโฟกัสเพื่อการเข้าถึง

### สรุปปุ่มลัด {#keyboard-cheat-sheet}

| คีย์            | การทำงาน                           |
| --------------- | ---------------------------------- |
| Y / J           | ยืนยัน ตกลง                        |
| N / Esc         | ยืนยัน ไม่                         |
| Enter           | สั่งปุ่มที่โฟกัส                   |
| Tab / Shift+Tab | เลื่อนโฟกัสไปข้างหน้า/ย้อนกลับ     |
| ปุ่มลูกศร       | เลื่อนโฟกัสระหว่างปุ่ม             |
| คำตอบเริ่มต้น   | ตั้งค่าโฟกัสเริ่มต้น (ตกลงหรือไม่) |

---

## ข้อจำกัด {#limitations}

- การส่งต่อ (Forward) ไม่ถูกแก้ไขโดยส่วนเสริมนี้ (รองรับ Reply และ Reply all)
- ไฟล์แนบที่มีขนาดใหญ่มากอาจถูกจำกัดโดย Thunderbird หรือผู้ให้บริการ
  - ส่วนเสริมไม่แบ่งชิ้นหรือบีบอัดไฟล์; อาศัยการจัดการไฟล์แนบปกติของ Thunderbird
- ข้อความที่เข้ารหัส: ส่วนของ S/MIME ถูกยกเว้นโดยตั้งใจ

---

## เหตุใดอาจไม่ได้เพิ่มไฟล์แนบ {#why-attachments-might-not-be-added}

- ภาพแบบ inline จะไม่ถูกเพิ่มเป็นไฟล์แนบ เมื่อ "Include inline pictures" เปิดอยู่ (ค่าเริ่มต้น) ภาพจะถูกฝังในเนื้อความของการตอบกลับเป็น data URI แทน หากตั้งค่านี้ปิด ภาพแบบ inline จะถูกลบออกทั้งหมด ดู [การตั้งค่า](configuration#include-inline-pictures)
- ส่วนลายเซ็น S/MIME ถูกยกเว้นตามการออกแบบ: ชื่อไฟล์เช่น `smime.p7s` และชนิด MIME เช่น `application/pkcs7-signature` หรือ `application/pkcs7-mime` จะถูกข้าม
- รูปแบบบัญชีดำสามารถคัดกรองผู้เข้าข่ายได้: ดู [การตั้งค่า](configuration#blacklist-glob-patterns); การจับคู่ไม่สนตัวพิมพ์เล็ก/ใหญ่ และดูเฉพาะชื่อไฟล์
- จะไม่เพิ่มชื่อไฟล์ที่ซ้ำอีกครั้ง: หากหน้าต่างเขียนอีเมลมีไฟล์ที่มีชื่อที่ถูกทำให้เป็นมาตรฐานเหมือนกันอยู่ จะถูกข้าม
- ส่วนที่ไม่ใช่ไฟล์หรือไม่มีชื่อไฟล์: จะพิจารณาเฉพาะส่วนที่มีลักษณะเป็นไฟล์และมีชื่อไฟล์ที่ใช้ได้เท่านั้นในการเพิ่ม

---

ดูเพิ่มเติม

- [การตั้งค่า](configuration)
