---
id: usage
title: 'نحوهٔ استفاده'
sidebar_label: 'نحوهٔ استفاده'
---

---

## نحوهٔ استفاده {#usage}

- با Reply، افزونه پیوست‌های اصلی را به‌طور خودکار اضافه می‌کند — یا اگر در Options فعال شده باشد، ابتدا می‌پرسد.
- حذف موارد تکراری بر اساس نام‌فایل؛ بخش‌های S/MIME همیشه نادیده گرفته می‌شوند. تصاویر درون‌خطی به‌طور پیش‌فرض در بدنهٔ پاسخ بازگردانی می‌شوند (می‌توانید از طریق "Include inline pictures" در Options غیرفعال کنید).
- پیوست‌های موجود در لیست سیاه نیز نادیده گرفته می‌شوند (الگوهای glob بدون حساسیت به بزرگی/کوچکی حروف که با نام‌فایل‌ها تطبیق می‌دهند، نه مسیرها). ببینید: [پیکربندی](configuration#blacklist-glob-patterns).

---

### هنگام پاسخ چه رخ می‌دهد {#what-happens}

- تشخیص پاسخ → فهرست‌کردن پیوست‌های اصلی → پالایش S/MIME + درون‌خطی → تأیید اختیاری → افزودن فایل‌های واجد شرایط (پرش از موارد تکراری) → بازگردانی تصاویر درون‌خطی در بدنه.

عبور سخت‌گیرانه در برابر عبور منعطف: افزونه ابتدا بخش‌های S/MIME و درون‌خطی را از پیوست‌های فایلی کنار می‌گذارد. اگر هیچ موردی واجد شرایط نبود، یک عبور منعطف اجرا می‌کند که همچنان S/MIME/درون‌خطی را کنار می‌گذارد اما موارد بیشتری را می‌پذیرد (به جزئیات کد مراجعه کنید). تصاویر درون‌خطی هرگز به‌عنوان پیوست فایل اضافه نمی‌شوند؛ در عوض، وقتی "Include inline pictures" فعال است (پیش‌فرض)، آن‌ها مستقیماً به‌صورت data URIهای base64 در بدنهٔ پاسخ درج می‌شوند.

| نوع بخش                                            |                         عبور سخت‌گیرانه |                              عبور منعطف |
| -------------------------------------------------- | --------------------------------------: | --------------------------------------: |
| فایل امضای S/MIME `smime.p7s`                      |                              حذف می‌شود |                              حذف می‌شود |
| انواع MIME مربوط به S/MIME (`application/pkcs7-*`) |                              حذف می‌شود |                              حذف می‌شود |
| تصویر درون‌خطی ارجاع‌شده با Content‑ID (`image/*`) | حذف می‌شود (در بدنه بازگردانی می‌شود\*) | حذف می‌شود (در بدنه بازگردانی می‌شود\*) |
| ایمیل پیوست‌شده (`message/rfc822`) با نام‌فایل     |                          افزوده نمی‌شود |                     ممکن است افزوده شود |
| پیوست فایل عادی با نام‌فایل                        |                     ممکن است افزوده شود |                     ممکن است افزوده شود |

\* وقتی "Include inline pictures" فعال باشد (پیش‌فرض: ON)، تصاویر درون‌خطی به‌جای اینکه به‌عنوان پیوست فایل اضافه شوند، به‌صورت data URIهای base64 در بدنهٔ پاسخ جاسازی می‌شوند. ببینید: [پیکربندی](configuration#include-inline-pictures).

مثال: ممکن است برخی پیوست‌ها بعضی سرآیندها را نداشته باشند اما همچنان فایل‌های عادی باشند (نه درون‌خطی/S/MIME). اگر عبور سخت‌گیرانه موردی پیدا نکند، عبور منعطف می‌تواند آن‌ها را بپذیرد و پیوست کند.

---

### ارجاع متقابل {#cross-reference}

- فوروارد بنا به طراحی تغییر نمی‌کند (به محدودیت‌ها در ادامه مراجعه کنید).
- برای دلایلی که ممکن است یک پیوست اضافه نشود، بخش «چرا ممکن است پیوست‌ها اضافه نشوند» را ببینید.

---

## جزئیات رفتار {#behavior-details}

- **جلوگیری از تکرار:** افزونه زبانهٔ نگارش را با استفاده از یک مقدار نشستِ مخصوص هر زبانه و یک محافظِ درون‌حافظه‌ای به‌عنوان پردازش‌شده علامت‌گذاری می‌کند. پیوست‌های اصلی را دوبار اضافه نخواهد کرد.
- بستن و دوباره باز کردن یک پنجرهٔ نگارش به‌عنوان یک زبانهٔ جدید تلقی می‌شود (یعنی یک تلاش جدید مجاز است).
- **احترام به پیوست‌های موجود:** اگر در نگارش از قبل پیوست‌هایی وجود داشته باشد، پیوست‌های اصلی همچنان دقیقاً یک‌بار اضافه می‌شوند و نام‌فایل‌هایی که از قبل وجود دارند، رد می‌شوند.
- **استثناها:** مصنوعات S/MIME و تصاویر درون‌خطی از پیوست‌های فایل کنار گذاشته می‌شوند. اگر در گذر اول هیچ موردی واجد شرایط نبود، یک جایگزین منعطف، بخش‌های غیرِ S/MIME را دوباره بررسی می‌کند. تصاویر درون‌خطی به‌طور جداگانه رسیدگی می‌شوند: آن‌ها در بدنهٔ پاسخ به‌صورت data URI بازگردانی می‌شوند (وقتی فعال باشد).
  - **نام‌فایل‌ها:** `smime.p7s`
  - **انواع MIME:** `application/pkcs7-signature`, `application/x-pkcs7-signature`, `application/pkcs7-mime`
  - **تصاویر درون‌خطی:** هر بخش `image/*` که با Content‑ID ارجاع شده — از پیوست‌های فایل کنار گذاشته می‌شود اما وقتی "Include inline pictures" روشن است، در بدنهٔ پاسخ جاسازی می‌شود
  - **ایمیل‌های پیوست‌شده (`message/rfc822`):** اگر نام‌فایل داشته باشند به‌عنوان پیوست‌های عادی در نظر گرفته می‌شوند؛ ممکن است اضافه شوند (مشروط به بررسی تکراری‌بودن و لیست سیاه).
- **هشدار لیست سیاه (اگر فعال باشد):** وقتی نامزدها به‌وسیلهٔ لیست سیاه شما کنار گذاشته شوند،
  افزونه یک مودال کوچک نشان می‌دهد که فایل‌های تحت‌تأثیر و الگوی
  منطبق را فهرست می‌کند. این هشدار همچنین در مواردی ظاهر می‌شود که هیچ پیوستی
  اضافه نخواهد شد چون همه‌چیز کنار گذاشته شده است.

---

## میانبرهای صفحه‌کلید {#keyboard-shortcuts}

- گفت‌وگوی تأیید: Y/J = Yes، N/Esc = No؛ کلیدهای Tab/Shift+Tab و Arrow فوکوس را چرخه می‌کنند.
  - «Default answer» در [پیکربندی](configuration#confirmation) دکمهٔ دارای فوکوس اولیه را تعیین می‌کند.
  - Enter دکمهٔ دارای فوکوس را فعال می‌کند. Tab/Shift+Tab و پیکان‌ها برای دسترس‌پذیری فوکوس را جابه‌جا می‌کنند.

### برگهٔ تقلبِ صفحه‌کلید {#keyboard-cheat-sheet}

| کلیدها          | اقدام                                   |
| --------------- | --------------------------------------- |
| Y / J           | تأییدِ بله                              |
| N / Esc         | تأییدِ خیر                              |
| Enter           | فعال‌سازی دکمهٔ دارای فوکوس             |
| Tab / Shift+Tab | جابه‌جایی فوکوس به جلو/عقب              |
| Arrow keys      | جابه‌جایی فوکوس بین دکمه‌ها             |
| Default answer  | فوکوس اولیه را تنظیم می‌کند (Yes یا No) |

---

## محدودیت‌ها {#limitations}

- این افزونه فوروارد را تغییر نمی‌دهد (Reply و Reply all پشتیبانی می‌شوند).
- پیوست‌های بسیار بزرگ ممکن است مشمول محدودیت‌های Thunderbird یا ارائه‌دهنده باشند.
  - افزونه فایل‌ها را قطعه‌بندی یا فشرده نمی‌کند؛ به پردازش عادی پیوست در Thunderbird تکیه دارد.
- پیام‌های رمزنگاری‌شده: بخش‌های S/MIME عمداً مستثنا می‌شوند.

---

## چرا ممکن است پیوست‌ها اضافه نشوند {#why-attachments-might-not-be-added}

- تصاویر درون‌خطی به‌عنوان پیوست فایل اضافه نمی‌شوند. وقتی "Include inline pictures" روشن است (پیش‌فرض)، آن‌ها به‌جای آن به‌صورت data URI در بدنهٔ پاسخ جاسازی می‌شوند. اگر این تنظیم OFF باشد، تصاویر درون‌خطی به‌طور کامل حذف می‌شوند. ببینید: [پیکربندی](configuration#include-inline-pictures).
- بخش‌های امضای S/MIME بنا به طراحی مستثنا می‌شوند: نام‌فایل‌هایی مثل `smime.p7s` و انواع MIME مانند `application/pkcs7-signature` یا `application/pkcs7-mime` نادیده گرفته می‌شوند.
- الگوهای لیست سیاه می‌توانند نامزدها را فیلتر کنند: ببینید [پیکربندی](configuration#blacklist-glob-patterns)؛ تطبیق بدون حساسیت به بزرگی/کوچکی حروف و فقط بر اساس نام‌فایل است.
- نام‌فایل‌های تکراری دوباره اضافه نمی‌شوند: اگر در نگارش از قبل فایلی با همان نام نرمال‌شده وجود داشته باشد، رد می‌شود.
- بخش‌های غیرِفایل یا بدون نام‌فایل: فقط بخش‌های شبیه فایل با نام‌فایلِ قابل‌استفاده برای افزودن در نظر گرفته می‌شوند.

---

همچنین ببینید

- [پیکربندی](configuration)
