---
id: usage
title: 'Употреба'
sidebar_label: 'Употреба'
---

---

## Използване {#usage}

- При Отговор добавката добавя оригиналите автоматично — или първо пита, ако е включено в Опции.
- Премахване на дубликати по име на файл; S/MIME частите винаги се пропускат. Вградените изображения се възстановяват в тялото на отговора по подразбиране (деактивирайте чрез "Include inline pictures" в Опции).
- Прикачени файлове в черния списък също се пропускат (шаблони тип glob без чувствителност към регистъра, съвпадащи по имена на файлове, не по пътища). Вижте [Конфигурация](configuration#blacklist-glob-patterns).

---

### Какво се случва при отговор {#what-happens}

- Откриване на отговор → изброяване на оригиналните прикачени → филтър S/MIME + вградени → по желание потвърждение → добавяне на допустимите файлове (пропускане на дубликати) → възстановяване на вградените изображения в тялото.

Строг срещу облекчен проход: Добавката първо изключва S/MIME и вградените части от файловите прикачвания. Ако нищо не отговаря, тя изпълнява облекчен проход, който пак изключва S/MIME/вградени, но допуска повече случаи (вижте Детайли за кода). Вградените изображения никога не се добавят като файлови прикачвания; вместо това, когато "Include inline pictures" е включено (по подразбиране), те се вграждат директно в тялото на отговора като base64 data URI.

| Тип част                                                   |                        Строг проход |                     Облекчен проход |
| ---------------------------------------------------------- | ----------------------------------: | ----------------------------------: |
| Файл с S/MIME подпис `smime.p7s`                           |                           Изключено |                           Изключено |
| S/MIME MIME типове (`application/pkcs7-*`)                 |                           Изключено |                           Изключено |
| Вградено изображение, реферирано от Content‑ID (`image/*`) | Изключено (възстановено в тялото\*) | Изключено (възстановено в тялото\*) |
| Прикачен имейл (`message/rfc822`) с име на файл            |                        Не се добавя |                   Може да се добави |
| Обикновено файлово прикачване с име на файл                |                   Може да се добави |                   Може да се добави |

\* Когато "Include inline pictures" е активирано (по подразбиране: ON), вградените изображения се вграждат в тялото на отговора като base64 data URI вместо да се добавят като файлови прикачвания. Вижте [Конфигурация](configuration#include-inline-pictures).

Пример: Някои прикачени файлове може да нямат определени заглавки, но все пак да са обикновени файлове (не вградени/S/MIME). Ако строгият проход не намери такива, облекченият може да ги приеме и добави.

---

### Кръстосана препратка {#cross-reference}

- Препращането не се променя по замисъл (вижте Ограничения по‑долу).
- За причините, поради които прикачвания може да не бъдат добавени, вижте „Защо прикачвания може да не бъдат добавени“.

---

## Подробности за поведението {#behavior-details}

- **Предотвратяване на дубликати:** Добавката маркира раздела за съставяне като обработен, използвайки стойност на сесията за раздел и охранител в паметта. Няма да добави оригиналите два пъти.
- Затварянето и отварянето наново на прозорец за съставяне се третира като нов раздел (т.е. позволява се нов опит).
- **Зачитане на съществуващи прикачвания:** Ако съставяният имейл вече съдържа някои прикачвания, оригиналите пак се добавят точно веднъж, като се пропускат вече съществуващите имена на файлове.
- **Изключения:** S/MIME артефакти и вградени изображения се изключват от файловите прикачвания. Ако нищо не отговаря при първия проход, облекчено резервно изпълнение преглежда отново невключените S/MIME части. Вградените изображения се обработват отделно: те се възстановяват в тялото на отговора като data URI (когато е активирано).
  - **Имена на файлове:** `smime.p7s`
  - **MIME типове:** `application/pkcs7-signature`, `application/x-pkcs7-signature`, `application/pkcs7-mime`
  - **Вградени изображения:** всяка `image/*` част, реферирана от Content‑ID — изключва се от файловите прикачвания, но се вгражда в тялото на отговора, когато "Include inline pictures" е ON
  - **Прикачени имейли (`message/rfc822`):** третират се като обикновени прикачвания, ако имат име на файл; може да бъдат добавени (подлежат на проверка за дубликати и черен списък).
- **Предупреждение за черен списък (ако е активирано):** Когато кандидатите се изключват от вашия черен списък,
  добавката показва малък модален прозорец, в който са изброени засегнатите файлове и съвпадащите
  шаблони. Това предупреждение се показва и в случаите, когато няма да бъдат
  добавени прикачвания, защото всичко е изключено.

---

## Клавишни комбинации {#keyboard-shortcuts}

- Диалог за потвърждение: Y/J = Yes, N/Esc = No; Tab/Shift+Tab и стрелките циклират фокуса.
  - “Default answer” в [Конфигурация](configuration#confirmation) задава първоначално фокусирания бутон.
  - Enter задейства фокусирания бутон. Tab/Shift+Tab и стрелките местят фокуса за по‑добра достъпност.

### Накратко за клавишите {#keyboard-cheat-sheet}

| Клавиши             | Действие                          |
| ------------------- | --------------------------------- |
| Y / J               | Потвърди „Да“                     |
| N / Esc             | Потвърди „Не“                     |
| Enter               | Активира фокусирания бутон        |
| Tab / Shift+Tab     | Премести фокуса напред/назад      |
| Стрелки             | Премести фокуса между бутоните    |
| Подразбиран отговор | Задава началния фокус (Да или Не) |

---

## Ограничения {#limitations}

- Препращане не се променя от тази добавка (поддържат се Отговор и Отговор до всички).
- Много големите прикачвания може да подлежат на ограничения на Thunderbird или доставчика.
  - Добавката не разделя на части и не компресира файлове; тя разчита на обичайното обработване на прикачвания в Thunderbird.
- Криптирани съобщения: S/MIME частите са умишлено изключени.

---

## Защо прикачвания може да не бъдат добавени {#why-attachments-might-not-be-added}

- Вградените изображения не се добавят като файлови прикачвания. Когато "Include inline pictures" е ON (по подразбиране), те се вграждат в тялото на отговора като data URI. Ако настройката е OFF, вградените изображения се премахват изцяло. Вижте [Конфигурация](configuration#include-inline-pictures).
- Частите със S/MIME подпис са изключени по замисъл: имена на файлове като `smime.p7s` и MIME типове като `application/pkcs7-signature` или `application/pkcs7-mime` се пропускат.
- Шаблоните за черен списък могат да филтрират кандидатите: вижте [Конфигурация](configuration#blacklist-glob-patterns); съвпадението не е чувствително към регистъра и е само по име на файл.
- Дублиращи се имена на файлове не се добавят повторно: ако съставяният имейл вече съдържа файл със същото нормализирано име, той се пропуска.
- Нефайлови части или липсващи имена на файлове: за добавяне се вземат предвид само части, наподобяващи файлове, с използваеми имена на файлове.

---

Вижте също

- [Конфигурация](configuration)
