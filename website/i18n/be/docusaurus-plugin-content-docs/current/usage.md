---
id: usage
title: 'Выкарыстанне'
sidebar_label: 'Выкарыстанне'
---

---

## Выкарыстанне {#usage}

- Пры адказе дадатак дадае арыгіналы аўтаматычна — або спачатку пытаецца, калі ўключана ў Наладах.
- Дублікаты пазбягаюцца па назве файла; часткі S/MIME заўсёды прапускаюцца. Убудаваныя выявы па змаўчанні аднаўляюцца ў целе адказу (можна адключыць праз "Include inline pictures" у Наладах).
- Укладанні з чорнага спісу таксама прапускаюцца (шаблоны glob, што параўноўваюць назвы файлаў, без уліку рэгістра; шляхі не ўлічваюцца). Гл. [Канфігурацыя](configuration#blacklist-glob-patterns).

---

### Што адбываецца пры адказе {#what-happens}

- Вызначыць адказ → пералічыць арыгінальныя ўкладанні → адфільтраваць S/MIME + убудаваныя → неабавязкова пацвердзіць → дадаць прыдатныя файлы (прапусціць дублікат) → аднавіць убудаваныя выявы ў целе.

Строгі супраць паслабленага праходу: дадатак спачатку выключае S/MIME і ўбудаваныя часткі з файлавых укладанняў. Калі нічога не падыходзіць, запускаецца паслаблены праход, які таксама выключае S/MIME/убудаваныя, але талеруе больш выпадкаў (гл. Падрабязнасці кода). Убудаваныя выявы ніколі не дадаюцца як файлавыя ўкладанні; замест гэтага, калі "Include inline pictures" уключана (па змаўчанні), яны ўбудоўваюцца непасрэдна ў цела адказу як URI з данымі ў base64.

| Тып часткі                                                   |                    Строгі праход |                Паслаблены праход |
| ------------------------------------------------------------ | -------------------------------: | -------------------------------: |
| Файл подпісу S/MIME `smime.p7s`                              |                        Выключана |                        Выключана |
| Тыпы MIME S/MIME (`application/pkcs7-*`)                     |                        Выключана |                        Выключана |
| Убудаваная выява, на якую спасылаецца Content‑ID (`image/*`) | Выключана (аднаўляецца ў целе\*) | Выключана (аднаўляецца ў целе\*) |
| Прыкрэплены ліст (`message/rfc822`) з назвай файла           |                      Не дадаецца |              Можа быць дададзена |
| Звычайнае файлавае ўкладанне з назвай файла                  |              Можа быць дададзена |              Можа быць дададзена |

\* Калі "Include inline pictures" уключана (па змаўчанні: УКЛ.), убудаваныя выявы ўбудоўваюцца ў цела адказу як URI з данымі ў base64 замест дадання ў выглядзе файлавых укладанняў. Гл. [Канфігурацыя](configuration#include-inline-pictures).

Прыклад: Некаторыя ўкладанні могуць не мець пэўных загалоўкаў, але пры гэтым з’яўляюцца звычайнымі файламі (не ўбудаваныя/S/MIME). Калі строгі праход нічога не знаходзіць, паслаблены можа прыняць такія файлы і прыкласці іх.

---

### Перакрыжаваныя спасылкі {#cross-reference}

- Перасылка наўмысна не змяняецца (гл. Абмежаванні ніжэй).
- Прычыны, чаму ўкладанне можа не быць дададзена: гл. “Чаму ўкладанні могуць не быць дададзены”.

---

## Падрабязнасці паводзінаў {#behavior-details}

- **Прадухіленне дублікатаў:** дадатак пазначае ўкладку складання як апрацаваную, выкарыстоўваючы сеансавае значэнне для кожнай укладкі і ўнутрыпамятны ахоўны механізм. Ён не дадае арыгіналы двойчы.
- Закрыццё і паўторнае адкрыццё акна складання разглядаецца як новая ўкладка (г.зн. дазваляецца новая спроба).
- **Улік існуючых укладанняў:** калі ў акне складання ўжо ёсць нейкія ўкладанні, арыгіналы ўсё адно дадаюцца толькі адзін раз, прапускаючы назвы, якія ўжо існуюць.
- **Выключэнні:** артэфакты S/MIME і ўбудаваныя выявы выключаюцца з файлавых укладанняў. Калі на першым праходзе нічога не падыходзіць, паслаблены рэзервовы праход паўторна правярае не‑S/MIME часткі. Убудаваныя выявы апрацоўваюцца асобна: яны аднаўляюцца ў целе адказу як URI з данымі (калі ўключана).
  - **Назвы файлаў:** `smime.p7s`
  - **Тыпы MIME:** `application/pkcs7-signature`, `application/x-pkcs7-signature`, `application/pkcs7-mime`
  - **Убудаваныя выявы:** любая частка `image/*`, на якую спасылаецца Content‑ID — выключаецца з файлавых укладанняў, але ўбудоўваецца ў цела адказу, калі "Include inline pictures" УКЛ.
  - **Прыкрэпленыя лісты (`message/rfc822`):** разглядаюцца як звычайныя ўкладанні, калі маюць назву файла; могуць быць дададзены (з улікам праверак на дублікаты і чорны спіс).
- **Папярэджанне пра чорны спіс (калі ўключана):** калі кандыдаты выключаюцца вашым чорным спісам,
  дадатак паказвае невялікае мадальнае акно са спісам закранутых файлаў і адпаведных
  шаблонаў. Гэта папярэджанне таксама з’яўляецца ў выпадках, калі ўкладанні не будуць
  дададзены, бо ўсё было выключана.

---

## Спалучэнні клавіш {#keyboard-shortcuts}

- Акно пацверджання: Y/J = Так, N/Esc = Не; Tab/Shift+Tab і стрэлкі цыклічна змяняюць фокус.
  - Параметр “Адказ па змаўчанні” ў [Канфігурацыя](configuration#confirmation) вызначае кнопку з пачатковым фокусам.
  - Enter актывуе сфакусаваную кнопку. Tab/Shift+Tab і стрэлкі змяняюць фокус для даступнасці.

### Шпаргалка па клавіятуры {#keyboard-cheat-sheet}

| Клавішы         | Дзеянне                            |
| --------------- | ---------------------------------- |
| Y / J           | Пацвердзіць Так                    |
| N / Esc         | Пацвердзіць Не                     |
| Enter           | Актываваць сфакусаваную кнопку     |
| Tab / Shift+Tab | Перамясціць фокус наперад/назад    |
| Arrow keys      | Перамяшчаць фокус паміж кнопкамі   |
| Default answer  | Задае пачатковы фокус (Так або Не) |

---

## Абмежаванні {#limitations}

- Перасылка гэтым дадаткам не змяняецца (падтрымліваюцца Адказ і Адказ усім).
- Вельмі вялікія ўкладанні могуць падпадаць пад абмежаванні Thunderbird або пастаўшчыка.
  - Дадатак не нарэзае і не сціскае файлы; ён абапіраецца на звычайную апрацоўку ўкладанняў у Thunderbird.
- Зашыфраваныя паведамленні: часткі S/MIME наўмысна выключаюцца.

---

## Чаму ўкладанні могуць не быць дададзены {#why-attachments-might-not-be-added}

- Убудаваныя выявы не дадаюцца як файлавыя ўкладанні. Калі "Include inline pictures" УКЛ. (па змаўчанні), яны ўбудоўваюцца ў цела адказу як URI з данымі ў base64. Калі налада ВЫКЛ., убудаваныя выявы цалкам выдаляюцца. Гл. [Канфігурацыя](configuration#include-inline-pictures).
- Часткі подпісу S/MIME выключаюцца па задуме: назвы файлаў кшталту `smime.p7s` і тыпы MIME, такія як `application/pkcs7-signature` або `application/pkcs7-mime`, прапускаюцца.
- Шаблоны чорнага спісу могуць фільтраваць кандыдаты: гл. [Канфігурацыя](configuration#blacklist-glob-patterns); супадзенне без уліку рэгістра і толькі па назве файла.
- Дублікатныя назвы файлаў не дадаюцца паўторна: калі ў акне складання ўжо ёсць файл з той жа нармалізаванай назвай, ён прапускаецца.
- Не файлавыя часткі або адсутныя назвы файлаў: для дадання разглядаюцца толькі падобныя да файла часткі з прыдатнымі назвамі.

---

Гл. таксама

- [Канфігурацыя](configuration)
