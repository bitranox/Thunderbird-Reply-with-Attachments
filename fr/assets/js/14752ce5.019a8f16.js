"use strict";(self.webpackChunkrwa_docs=self.webpackChunkrwa_docs||[]).push([[507],{2846(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"development","title":"D\xe9veloppement","description":"---","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/development.md","sourceDirName":".","slug":"/development","permalink":"/Thunderbird-Reply-with-Attachments/fr/docs/development","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1757726723000,"frontMatter":{"id":"development","title":"D\xe9veloppement","sidebar_label":"D\xe9veloppement"},"sidebar":"docs","previous":{"title":"Autorisations","permalink":"/Thunderbird-Reply-with-Attachments/fr/docs/permissions"},"next":{"title":"Langues","permalink":"/Thunderbird-Reply-with-Attachments/fr/docs/languages"}}');var l=n(4848),r=n(8453);const d={id:"development",title:"D\xe9veloppement",sidebar_label:"D\xe9veloppement"},t=void 0,c={},a=[{value:"Guide de d\xe9veloppement",id:"development-guide",level:2},{value:"Pr\xe9requis",id:"prerequisites",level:3},{value:"Structure du projet (vue d\u2019ensemble)",id:"project-layout-high-level",level:3},{value:"Installation et outils",id:"install-and-tooling",level:3},{value:"D\xe9veloppement en direct (web\u2011ext run)",id:"live-dev-web-ext",level:3},{value:"Cibles Make (alphab\xe9tique)",id:"make-targets-alphabetical",level:3},{value:"Conseils de build par locale",id:"locale-build-tips",level:4},{value:"Compilation et empaquetage",id:"build-and-package",level:3},{value:"Tests",id:"test",level:3},{value:"D\xe9bogage et journaux",id:"debugging-and-logs",level:3},{value:"Docs (site web)",id:"docs-website",level:3},{value:"Route de redirection de don",id:"donate-redirect",level:4},{value:"Conseils d\u2019aper\xe7u",id:"preview-tips",level:4},{value:"Traduire le site web",id:"translate-website",level:4},{value:"Conseils de s\xe9curit\xe9 et de configuration",id:"security-and-configuration-tips",level:3},{value:"Persistance des param\xe8tres",id:"settings-persistence",level:3},{value:"D\xe9pannage",id:"troubleshooting",level:3},{value:"CI et couverture",id:"ci-and-coverage",level:3},{value:"Contribution",id:"contributing",level:3},{value:"Traductions",id:"traductions",level:3},{value:"clean",id:"mt-clean",level:4},{value:"commit",id:"mt-commit",level:4},{value:"eslint",id:"mt-eslint",level:4},{value:"help",id:"mt-help",level:4},{value:"lint",id:"mt-lint",level:4},{value:"menu",id:"mt-menu",level:4},{value:"pack",id:"mt-pack",level:4},{value:"prettier",id:"mt-prettier",level:4},{value:"prettier_check",id:"mt-prettier_check",level:4},{value:"prettier_write",id:"mt-prettier_write",level:4},{value:"test",id:"mt-test",level:4},{value:"test_i18n",id:"mt-test_i18n",level:4},{value:"translate_app / translation_app",id:"mt-translation-app",level:4},{value:"translate_web_docs_batch / translate_web_docs_sync",id:"mt-translation-web",level:4},{value:"translate_web_index / translation_web_index",id:"mt-translation_web_index",level:4},{value:"web_build",id:"mt-web_build",level:4},{value:"web_build_linkcheck",id:"mt-web_build_linkcheck",level:4},{value:"web_build_local_preview",id:"mt-web_build_local_preview",level:4},{value:"web_push_github",id:"mt-web_push_github",level:4}];function o(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h2,{id:"development-guide",children:"Guide de d\xe9veloppement"}),"\n",(0,l.jsx)(s.admonition,{title:"Modifier uniquement l\u2019anglais ; les traductions se propagent",type:"note",children:(0,l.jsxs)(s.p,{children:["Mettez \xe0 jour la documentation ",(0,l.jsx)(s.strong,{children:"uniquement"})," sous ",(0,l.jsx)(s.code,{children:"website/docs"})," (anglais). Les traductions sous ",(0,l.jsx)(s.code,{children:"website/i18n/<locale>/\u2026"})," sont g\xe9n\xe9r\xe9es et ne doivent pas \xeatre modifi\xe9es manuellement. Utilisez les t\xe2ches de traduction (p. ex., ",(0,l.jsx)(s.code,{children:"make translate_web_docs_batch"}),") pour actualiser le contenu localis\xe9."]})}),"\n",(0,l.jsx)(s.h3,{id:"prerequisites",children:"Pr\xe9requis"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Node.js 22+ et npm (test\xe9 avec Node 22)"}),"\n",(0,l.jsx)(s.li,{children:"Thunderbird 128 ESR ou plus r\xe9cent (pour les tests manuels)"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"project-layout-high-level",children:"Structure du projet (vue d\u2019ensemble)"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Racine : script de packaging ",(0,l.jsx)(s.code,{children:"distribution_zip_packer.sh"}),", docs, captures d\u2019\xe9cran"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"sources/"})," : code principal du module (arri\xe8re\u2011plan, UI options/popup, manifests, ic\xf4nes)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"tests/"})," : suite Vitest"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"website/"})," : docs Docusaurus (avec i18n sous ",(0,l.jsx)(s.code,{children:"website/i18n/de/..."}),")"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"install-and-tooling",children:"Installation et outils"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Installer les d\xe9pendances racine : ",(0,l.jsx)(s.code,{children:"npm ci"})]}),"\n",(0,l.jsxs)(s.li,{children:["Docs (optionnel) : ",(0,l.jsx)(s.code,{children:"cd website && npm ci"})]}),"\n",(0,l.jsxs)(s.li,{children:["D\xe9couvrir les cibles : ",(0,l.jsx)(s.code,{children:"make help"})]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"live-dev-web-ext",children:"D\xe9veloppement en direct (web\u2011ext run)"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Boucle rapide dans Firefox Desktop (tests sommaires de l\u2019UI uniquement) :"}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"npx web-ext run --source-dir sources --target=firefox-desktop"})}),"\n",(0,l.jsx)(s.li,{children:"Ex\xe9cuter dans Thunderbird (pr\xe9f\xe9r\xe9 pour les MailExtensions) :"}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:'npx web-ext run --source-dir sources --start-url about:addons --firefox-binary "$(command -v thunderbird || echo /path/to/thunderbird)"'})}),"\n",(0,l.jsx)(s.li,{children:"Conseils :"}),"\n",(0,l.jsx)(s.li,{children:"Gardez la console d\u2019erreurs de Thunderbird ouverte (Outils \u2192 Outils de d\xe9veloppement \u2192 Console d\u2019erreurs)."}),"\n",(0,l.jsx)(s.li,{children:"Les pages d\u2019\xe9v\xe9nements MV3 sont suspendues \xe0 l\u2019inactivit\xe9 ; rechargez le module apr\xe8s des modifications de code, ou laissez web\u2011ext recharger automatiquement."}),"\n",(0,l.jsx)(s.li,{children:"Certains comportements propres \xe0 Firefox diff\xe8rent ; v\xe9rifiez toujours dans Thunderbird pour la parit\xe9 des API."}),"\n",(0,l.jsx)(s.li,{children:"Chemins binaires de Thunderbird (exemples) :"}),"\n",(0,l.jsxs)(s.li,{children:["Linux : ",(0,l.jsx)(s.code,{children:"thunderbird"})," (p. ex., ",(0,l.jsx)(s.code,{children:"/usr/bin/thunderbird"}),")"]}),"\n",(0,l.jsxs)(s.li,{children:["macOS : ",(0,l.jsx)(s.code,{children:"/Applications/Thunderbird.app/Contents/MacOS/thunderbird"})]}),"\n",(0,l.jsxs)(s.li,{children:["Windows : ",(0,l.jsx)(s.code,{children:'"C:\\\\Program Files\\\\Mozilla Thunderbird\\\\thunderbird.exe"'})]}),"\n",(0,l.jsx)(s.li,{children:"Isolement de profil : utilisez un profil Thunderbird distinct pour le d\xe9veloppement afin d\u2019\xe9viter d\u2019affecter votre configuration quotidienne."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"make-targets-alphabetical",children:"Cibles Make (alphab\xe9tique)"}),"\n",(0,l.jsxs)(s.p,{children:["Le Makefile standardise les flux de dev courants. Ex\xe9cutez ",(0,l.jsx)(s.code,{children:"make help"})," \xe0 tout moment pour un r\xe9sum\xe9 en une ligne de chaque cible."]}),"\n",(0,l.jsxs)(s.p,{children:["Astuce : ex\xe9cuter ",(0,l.jsx)(s.code,{children:"make"})," sans cible ouvre un simple menu Whiptail pour choisir une cible."]}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Cible"}),(0,l.jsx)(s.th,{children:"Description en une ligne"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-clean",children:(0,l.jsx)(s.code,{children:"clean"})})}),(0,l.jsx)(s.td,{children:"Supprime les artefacts de build/aper\xe7u locaux (tmp/, web-local-preview/, website/build/)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-commit",children:(0,l.jsx)(s.code,{children:"commit"})})}),(0,l.jsx)(s.td,{children:"Formate, ex\xe9cute les tests (y c. i18n), met \xe0 jour le changelog, commit et push."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-eslint",children:(0,l.jsx)(s.code,{children:"eslint"})})}),(0,l.jsxs)(s.td,{children:["Ex\xe9cute ESLint via configuration plate (",(0,l.jsx)(s.code,{children:"npm run -s lint:eslint"}),")."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-help",children:(0,l.jsx)(s.code,{children:"help"})})}),(0,l.jsx)(s.td,{children:"Liste toutes les cibles avec une doc en une ligne (tri\xe9es)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-lint",children:(0,l.jsx)(s.code,{children:"lint"})})}),(0,l.jsxs)(s.td,{children:["web\u2011ext lint sur ",(0,l.jsx)(s.code,{children:"sources/"})," (manifeste temporaire ; ignore les ZIP ; non fatal)."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-menu",children:(0,l.jsx)(s.code,{children:"menu"})})}),(0,l.jsx)(s.td,{children:"Menu interactif pour s\xe9lectionner une cible et des arguments optionnels."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-pack",children:(0,l.jsx)(s.code,{children:"pack"})})}),(0,l.jsx)(s.td,{children:"Construit les ZIP ATN & LOCAL (ex\xe9cute le linter ; appelle le script de packaging)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-prettier",children:(0,l.jsx)(s.code,{children:"prettier"})})}),(0,l.jsx)(s.td,{children:"Formate le d\xe9p\xf4t sur place (\xe9crit les modifications)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-prettier_check",children:(0,l.jsx)(s.code,{children:"prettier_check"})})}),(0,l.jsx)(s.td,{children:"Prettier en mode v\xe9rification (sans \xe9criture) ; \xe9choue si un reformatage est n\xe9cessaire."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-prettier_write",children:(0,l.jsx)(s.code,{children:"prettier_write"})})}),(0,l.jsxs)(s.td,{children:["Alias de ",(0,l.jsx)(s.code,{children:"prettier"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-test",children:(0,l.jsx)(s.code,{children:"test"})})}),(0,l.jsx)(s.td,{children:"Prettier (\xe9criture), ESLint, puis Vitest (couverture si configur\xe9e)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-test_i18n",children:(0,l.jsx)(s.code,{children:"test_i18n"})})}),(0,l.jsx)(s.td,{children:"Tests i18n uniquement : espaces r\xe9serv\xe9s/parit\xe9 de l\u2019extension + parit\xe9 du site."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation-app",children:(0,l.jsx)(s.code,{children:"translate_app"})})}),(0,l.jsxs)(s.td,{children:["Alias de ",(0,l.jsx)(s.code,{children:"translation_app"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation-app",children:(0,l.jsx)(s.code,{children:"translation_app"})})}),(0,l.jsxs)(s.td,{children:["Traduit les cha\xeenes d\u2019UI de l\u2019application depuis ",(0,l.jsx)(s.code,{children:"sources/_locales/en/messages.json"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation-web",children:(0,l.jsx)(s.code,{children:"translate_web_docs_batch"})})}),(0,l.jsx)(s.td,{children:"Traduit la documentation du site via l\u2019API OpenAI Batch (pr\xe9f\xe9r\xe9)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation-web",children:(0,l.jsx)(s.code,{children:"translate_web_docs_sync"})})}),(0,l.jsx)(s.td,{children:"Traduit la documentation du site de mani\xe8re synchrone (h\xe9ritage, sans batch)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation_web_index",children:(0,l.jsx)(s.code,{children:"translate_web_index"})})}),(0,l.jsxs)(s.td,{children:["Alias de ",(0,l.jsx)(s.code,{children:"translation_web_index"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-translation_web_index",children:(0,l.jsx)(s.code,{children:"translation_web_index"})})}),(0,l.jsxs)(s.td,{children:["Traduit l\u2019UI de la page d\u2019accueil/de la barre de navigation/du pied de page (",(0,l.jsx)(s.code,{children:"website/i18n/en/code.json \u2192 .../<lang>/code.json"}),")."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-web_build",children:(0,l.jsx)(s.code,{children:"web_build"})})}),(0,l.jsxs)(s.td,{children:["Construit la documentation vers ",(0,l.jsx)(s.code,{children:"website/build"})," (prend en charge ",(0,l.jsx)(s.code,{children:"--locales"})," / ",(0,l.jsx)(s.code,{children:"BUILD_LOCALES"}),")."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-web_build_linkcheck",children:(0,l.jsx)(s.code,{children:"web_build_linkcheck"})})}),(0,l.jsx)(s.td,{children:"V\xe9rification des liens sans connexion (ignore les HTTP[S] distants)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-web_build_local_preview",children:(0,l.jsx)(s.code,{children:"web_build_local_preview"})})}),(0,l.jsx)(s.td,{children:"Aper\xe7u gh\u2011pages local ; auto\u2011service sur 8080\u20138090 ; tests/v\xe9rification des liens en option."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.a,{href:"#mt-web_push_github",children:(0,l.jsx)(s.code,{children:"web_push_github"})})}),(0,l.jsxs)(s.td,{children:["Pousse ",(0,l.jsx)(s.code,{children:"website/build"})," sur la branche ",(0,l.jsx)(s.code,{children:"gh-pages"}),"."]})]})]})]}),"\n",(0,l.jsx)(s.p,{children:"Syntaxe des options"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Utilisez ",(0,l.jsx)(s.code,{children:'make <command> OPTS="\u2026"'})," pour passer des options (guillemets recommand\xe9s). Chaque cible ci\u2011dessous montre un exemple d\u2019utilisation."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"--"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"locale-build-tips",children:"Conseils de build par locale"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Construire un sous\u2011ensemble de locales : d\xe9finir ",(0,l.jsx)(s.code,{children:'BUILD_LOCALES="en de"'})," ou passer ",(0,l.jsx)(s.code,{children:'OPTS="--locales en,de"'})," aux cibles web."]}),"\n",(0,l.jsxs)(s.li,{children:["Aper\xe7u d\u2019une locale sp\xe9cifique : ",(0,l.jsx)(s.code,{children:"http://localhost:<port>/Thunderbird-Reply-with-Attachments/de/"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"build-and-package",children:"Compilation et empaquetage"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Construire les ZIP : ",(0,l.jsx)(s.code,{children:"make pack"})]}),"\n",(0,l.jsx)(s.li,{children:"Produit des ZIP ATN et LOCAL \xe0 la racine du d\xe9p\xf4t (ne pas modifier les artefacts \xe0 la main)"}),"\n",(0,l.jsxs)(s.li,{children:["Astuce : mettez \xe0 jour la version \xe0 la fois dans ",(0,l.jsx)(s.code,{children:"sources/manifest_ATN.json"})," et ",(0,l.jsx)(s.code,{children:"sources/manifest_LOCAL.json"})," avant l\u2019empaquetage"]}),"\n",(0,l.jsx)(s.li,{children:"Installation manuelle (dev) : Thunderbird \u2192 Outils \u2192 Modules compl\xe9mentaires et th\xe8mes \u2192 engrenage \u2192 Installer un module depuis un fichier\u2026 \u2192 s\xe9lectionner le ZIP construit"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"test",children:"Tests"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Suite compl\xe8te : ",(0,l.jsx)(s.code,{children:"make test"})," (Vitest)"]}),"\n",(0,l.jsx)(s.li,{children:"Couverture (optionnel) :"}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"npm i -D @vitest/coverage-v8"})}),"\n",(0,l.jsxs)(s.li,{children:["Ex\xe9cutez ",(0,l.jsx)(s.code,{children:"make test"})," ; ouvrez ",(0,l.jsx)(s.code,{children:"coverage/index.html"})," pour le rapport HTML"]}),"\n",(0,l.jsxs)(s.li,{children:["i18n uniquement : ",(0,l.jsx)(s.code,{children:"make test_i18n"})," (cl\xe9s/espaces r\xe9serv\xe9s/titres de l\u2019UI + parit\xe9 site par locale et par doc avec v\xe9rifications id/title/sidebar_label)"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"debugging-and-logs",children:"D\xe9bogage et journaux"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Console d\u2019erreurs : Outils \u2192 Outils de d\xe9veloppement \u2192 Console d\u2019erreurs"}),"\n",(0,l.jsx)(s.li,{children:"Activer/d\xe9sactiver les journaux d\xe9taill\xe9s \xe0 l\u2019ex\xe9cution :"}),"\n",(0,l.jsxs)(s.li,{children:["Activer : ",(0,l.jsx)(s.code,{children:"messenger.storage.local.set({ debug: true })"})]}),"\n",(0,l.jsxs)(s.li,{children:["D\xe9sactiver : ",(0,l.jsx)(s.code,{children:"messenger.storage.local.set({ debug: false })"})]}),"\n",(0,l.jsx)(s.li,{children:"Les journaux apparaissent lors de la r\xe9daction/de l\u2019envoi des r\xe9ponses"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"docs-website",children:"Docs (site web)"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Serveur de dev : ",(0,l.jsx)(s.code,{children:"cd website && npm run start"})]}),"\n",(0,l.jsxs)(s.li,{children:["Construire le site statique : ",(0,l.jsx)(s.code,{children:"cd website && npm run build"})]}),"\n",(0,l.jsxs)(s.li,{children:["\xc9quivalents Make (alphab\xe9tique) : ",(0,l.jsx)(s.code,{children:"make web_build"}),", ",(0,l.jsx)(s.code,{children:"make web_build_linkcheck"}),", ",(0,l.jsx)(s.code,{children:"make web_build_local_preview"}),", ",(0,l.jsx)(s.code,{children:"make web_push_github"})]}),"\n",(0,l.jsx)(s.li,{children:"Exemples d\u2019utilisation :"}),"\n",(0,l.jsxs)(s.li,{children:["EN uniquement, ignorer tests/v\xe9rif. des liens, pas de push : ",(0,l.jsx)(s.code,{children:'make web_build_local_preview OPTS="--locales en --no-test --no-link-check --dry-run"'})]}),"\n",(0,l.jsxs)(s.li,{children:["Toutes les locales, avec tests/v\xe9rif. des liens, puis push : ",(0,l.jsx)(s.code,{children:"make web_build_local_preview && make web_push_github"})]}),"\n",(0,l.jsxs)(s.li,{children:["Avant de publier, ex\xe9cutez la v\xe9rification des liens sans connexion : ",(0,l.jsx)(s.code,{children:"make web_build_linkcheck"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["i18n : l\u2019anglais vit dans ",(0,l.jsx)(s.code,{children:"website/docs/*.md"})," ; les traductions allemandes dans ",(0,l.jsx)(s.code,{children:"website/i18n/de/docusaurus-plugin-content-docs/current/*.md"})]}),"\n",(0,l.jsxs)(s.li,{children:["Recherche : Si les variables d\u2019environnement Algolia DocSearch sont d\xe9finies dans le CI (",(0,l.jsx)(s.code,{children:"DOCSEARCH_APP_ID"}),", ",(0,l.jsx)(s.code,{children:"DOCSEARCH_API_KEY"}),", ",(0,l.jsx)(s.code,{children:"DOCSEARCH_INDEX_NAME"}),"), le site utilise la recherche Algolia ; sinon, il revient \xe0 la recherche locale. Sur la page d\u2019accueil, appuyez sur ",(0,l.jsx)(s.code,{children:"/"})," ou ",(0,l.jsx)(s.code,{children:"Ctrl+K"})," pour ouvrir la bo\xeete de recherche."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"donate-redirect",children:"Route de redirection de don"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"website/src/pages/donate.js"})}),"\n",(0,l.jsxs)(s.li,{children:["Itin\xe9raire : ",(0,l.jsx)(s.code,{children:"/donate"})," (et ",(0,l.jsx)(s.code,{children:"/<locale>/donate"}),")"]}),"\n",(0,l.jsx)(s.li,{children:"Comportement :"}),"\n",(0,l.jsxs)(s.li,{children:["Si l\u2019itin\xe9raire actuel a une locale (p. ex., ",(0,l.jsx)(s.code,{children:"/de/donate"}),"), l\u2019utiliser"]}),"\n",(0,l.jsxs)(s.li,{children:["Sinon, choisir la meilleure correspondance entre ",(0,l.jsx)(s.code,{children:"navigator.languages"})," et les locales configur\xe9es ; repli sur la locale par d\xe9faut"]}),"\n",(0,l.jsx)(s.li,{children:"Redirige vers :"}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"en"})," \u2192 ",(0,l.jsx)(s.code,{children:"/docs/donation"})]}),"\n",(0,l.jsxs)(s.li,{children:["autres \u2192 ",(0,l.jsx)(s.code,{children:"/<locale>/docs/donation"})]}),"\n",(0,l.jsxs)(s.li,{children:["Utilise ",(0,l.jsx)(s.code,{children:"useBaseUrl"})," pour une gestion correcte de baseUrl"]}),"\n",(0,l.jsxs)(s.li,{children:["Inclut un meta refresh + un lien ",(0,l.jsx)(s.code,{children:"noscript"})," comme repli"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"preview-tips",children:"Conseils d\u2019aper\xe7u"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Arr\xeater proprement l\u2019aper\xe7u Node : ouvrir ",(0,l.jsx)(s.code,{children:"http://localhost:<port>/__stop"})," (affich\xe9 apr\xe8s ",(0,l.jsx)(s.code,{children:"Local server started"}),")."]}),"\n",(0,l.jsxs)(s.li,{children:["Si les images ne se chargent pas en MDX/JSX, utilisez ",(0,l.jsx)(s.code,{children:"useBaseUrl('/img/...')"})," pour respecter le ",(0,l.jsx)(s.code,{children:"baseUrl"})," du site."]}),"\n",(0,l.jsx)(s.li,{children:"L\u2019aper\xe7u d\xe9marre d\u2019abord ; la v\xe9rification des liens s\u2019ex\xe9cute ensuite et n\u2019est pas bloquante (les liens externes cass\xe9s n\u2019arr\xeatent pas l\u2019aper\xe7u)."}),"\n",(0,l.jsxs)(s.li,{children:["URL d\u2019aper\xe7u exemple : ",(0,l.jsx)(s.code,{children:"http://localhost:<port>/Thunderbird-Reply-with-Attachments/"})," (affich\xe9e apr\xe8s \xab Local server started \xbb)."]}),"\n",(0,l.jsx)(s.li,{children:"Liens externes lors de la v\xe9rification : Certains sites externes (p. ex., addons.thunderbird.net) bloquent les robots automatis\xe9s et peuvent afficher 403 lors des v\xe9rifications. L\u2019aper\xe7u d\xe9marre quand m\xeame ; on peut ignorer cela sans risque."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"translate-website",children:"Traduire le site web"}),"\n",(0,l.jsx)(s.p,{children:"Ce que vous pouvez traduire"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Uniquement l\u2019UI du site : page d\u2019accueil, barre de navigation, pied de page et autres cha\xeenes d\u2019UI. Le contenu des docs reste pour l\u2019instant uniquement en anglais."}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"O\xf9 \xe9diter"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\xc9ditez ",(0,l.jsx)(s.code,{children:"website/i18n/<locale>/code.json"})," (utilisez ",(0,l.jsx)(s.code,{children:"en"})," comme r\xe9f\xe9rence). Gardez inchang\xe9s les espaces r\xe9serv\xe9s tels que ",(0,l.jsx)(s.code,{children:"{year}"}),", ",(0,l.jsx)(s.code,{children:"{slash}"}),", ",(0,l.jsx)(s.code,{children:"{ctrl}"}),", ",(0,l.jsx)(s.code,{children:"{k}"}),", ",(0,l.jsx)(s.code,{children:"{code1}"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"G\xe9n\xe9rer ou actualiser les fichiers"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Cr\xe9er les squelettes manquants pour toutes les locales : ",(0,l.jsx)(s.code,{children:"npm --prefix website run i18n:stubs"})]}),"\n",(0,l.jsxs)(s.li,{children:["\xc9craser les squelettes depuis l\u2019anglais (apr\xe8s ajout de nouvelles cha\xeenes) : ",(0,l.jsx)(s.code,{children:"npm --prefix website run i18n:stubs:force"})]}),"\n",(0,l.jsxs)(s.li,{children:["Alternative pour une seule locale : ",(0,l.jsx)(s.code,{children:"npx --prefix website docusaurus write-translations --locale <locale>"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Traduire les cha\xeenes d\u2019UI de la page d\u2019accueil/barre de navigation/pied de page (OpenAI)"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"D\xe9finir les identifiants une fois (shell ou .env) :"}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"export OPENAI_API_KEY=sk-..."})}),"\n",(0,l.jsxs)(s.li,{children:["Facultatif : ",(0,l.jsx)(s.code,{children:"export OPENAI_MODEL=gpt-4o-mini"})]}),"\n",(0,l.jsxs)(s.li,{children:["En une fois (toutes les locales, exclut en) : ",(0,l.jsx)(s.code,{children:"make translate_web_index"})]}),"\n",(0,l.jsxs)(s.li,{children:["Limiter \xe0 des locales sp\xe9cifiques : ",(0,l.jsx)(s.code,{children:'make translate_web_index OPTS="--locales de,fr"'})]}),"\n",(0,l.jsxs)(s.li,{children:["\xc9craser les valeurs existantes : ",(0,l.jsx)(s.code,{children:'make translate_web_index OPTS="--force"'})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Validation et nouvelles tentatives"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Le script de traduction valide la forme JSON, pr\xe9serve les espaces r\xe9serv\xe9s entre accolades et garantit que les URL restent inchang\xe9es."}),"\n",(0,l.jsx)(s.li,{children:"En cas d\u2019\xe9chec de validation, il retente avec retour jusqu\u2019\xe0 2 fois avant de conserver les valeurs existantes."}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Pr\xe9visualiser votre locale"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Serveur de dev : ",(0,l.jsx)(s.code,{children:"npm --prefix website run start"})]}),"\n",(0,l.jsxs)(s.li,{children:["Visitez ",(0,l.jsx)(s.code,{children:"http://localhost:3000/<locale>/Thunderbird-Reply-with-Attachments/"})]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Soumission"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Ouvrez une PR avec le(s) fichier(s) ",(0,l.jsx)(s.code,{children:"code.json"})," modifi\xe9(s). Gardez les changements cibl\xe9s et incluez une capture d\u2019\xe9cran rapide si possible."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"security-and-configuration-tips",children:"Conseils de s\xe9curit\xe9 et de configuration"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Ne commitez pas ",(0,l.jsx)(s.code,{children:"sources/manifest.json"})," (cr\xe9\xe9 temporairement par le build)"]}),"\n",(0,l.jsxs)(s.li,{children:["Gardez ",(0,l.jsx)(s.code,{children:"browser_specific_settings.gecko.id"})," stable pour pr\xe9server le canal de mise \xe0 jour"]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"settings-persistence",children:"Persistance des param\xe8tres"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Stockage : Tous les param\xe8tres utilisateur r\xe9sident dans ",(0,l.jsx)(s.code,{children:"storage.local"})," et persistent lors des mises \xe0 jour du module."]}),"\n",(0,l.jsx)(s.li,{children:"Installation : Les valeurs par d\xe9faut ne sont appliqu\xe9es que lorsqu\u2019une cl\xe9 est strictement manquante (undefined)."}),"\n",(0,l.jsx)(s.li,{children:"Mise \xe0 jour : Une migration ne remplit que les cl\xe9s manquantes ; les valeurs existantes ne sont jamais \xe9cras\xe9es."}),"\n",(0,l.jsxs)(s.li,{children:["Marqueur de sch\xe9ma : ",(0,l.jsx)(s.code,{children:"settingsVersion"})," (actuellement ",(0,l.jsx)(s.code,{children:"1"}),")."]}),"\n",(0,l.jsx)(s.li,{children:"Cl\xe9s et valeurs par d\xe9faut :"}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"blacklistPatterns: string[]"})," \u2192 ",(0,l.jsx)(s.code,{children:"['*intern*', '*secret*', '*passwor*']"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"confirmBeforeAdd: boolean"})," \u2192 ",(0,l.jsx)(s.code,{children:"false"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"confirmDefaultChoice: 'yes'|'no'"})," \u2192 ",(0,l.jsx)(s.code,{children:"'yes'"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"warnOnBlacklistExcluded: boolean"})," \u2192 ",(0,l.jsx)(s.code,{children:"true"})]}),"\n",(0,l.jsxs)(s.li,{children:["Code : voir ",(0,l.jsx)(s.code,{children:"sources/background.js"})," \u2192 ",(0,l.jsx)(s.code,{children:"initializeOrMigrateSettings()"})," et ",(0,l.jsx)(s.code,{children:"SCHEMA_VERSION"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Flux de d\xe9veloppement (ajouter un nouveau param\xe8tre)"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Incr\xe9mentez ",(0,l.jsx)(s.code,{children:"SCHEMA_VERSION"})," dans ",(0,l.jsx)(s.code,{children:"sources/background.js"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Ajoutez la nouvelle cl\xe9 + valeur par d\xe9faut \xe0 l\u2019objet ",(0,l.jsx)(s.code,{children:"DEFAULTS"})," dans ",(0,l.jsx)(s.code,{children:"initializeOrMigrateSettings()"}),"."]}),"\n",(0,l.jsx)(s.li,{children:"Utilisez la r\xe8gle \xab only\u2011if\u2011undefined \xbb lors du semis des valeurs par d\xe9faut ; n\u2019\xe9crasez pas les valeurs existantes."}),"\n",(0,l.jsxs)(s.li,{children:["Si le param\xe8tre est visible par l\u2019utilisateur, c\xe2blez\u2011le dans ",(0,l.jsx)(s.code,{children:"sources/options.js"})," et ajoutez des cha\xeenes localis\xe9es."]}),"\n",(0,l.jsxs)(s.li,{children:["Ajoutez/ajustez les tests (voir ",(0,l.jsx)(s.code,{children:"tests/background.settings.migration.test.js"}),")."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Conseils de test manuel"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Simuler une installation neuve : effacez le r\xe9pertoire de donn\xe9es de l\u2019extension ou d\xe9marrez avec un nouveau profil."}),"\n",(0,l.jsxs)(s.li,{children:["Simuler une mise \xe0 jour : d\xe9finissez ",(0,l.jsx)(s.code,{children:"settingsVersion"})," \xe0 ",(0,l.jsx)(s.code,{children:"0"})," dans ",(0,l.jsx)(s.code,{children:"storage.local"})," puis rechargez ; confirmez que les valeurs existantes restent inchang\xe9es et que seules les cl\xe9s manquantes sont ajout\xe9es."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"troubleshooting",children:"D\xe9pannage"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Assurez\u2011vous que Thunderbird est en version 128 ESR ou plus r\xe9cente"}),"\n",(0,l.jsx)(s.li,{children:"Utilisez la console d\u2019erreurs pour les probl\xe8mes d\u2019ex\xe9cution"}),"\n",(0,l.jsx)(s.li,{children:"Si les param\xe8tres stock\xe9s semblent ne pas s\u2019appliquer correctement, red\xe9marrez Thunderbird et r\xe9essayez. (Thunderbird peut mettre en cache l\u2019\xe9tat entre les sessions ; un red\xe9marrage garantit que des param\xe8tres frais sont charg\xe9s.)"}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"ci-and-coverage",children:"CI et couverture"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["GitHub Actions (",(0,l.jsx)(s.code,{children:"CI \u2014 Tests"}),") ex\xe9cute vitest avec des seuils de couverture (85 % lignes/fonctions/branches/instructions). Si les seuils ne sont pas atteints, la t\xe2che \xe9choue."]}),"\n",(0,l.jsxs)(s.li,{children:["Le workflow t\xe9l\xe9verse un artefact ",(0,l.jsx)(s.code,{children:"coverage-html"})," avec le rapport HTML ; t\xe9l\xe9chargez\u2011le depuis la page d\u2019ex\xe9cution (Actions \u2192 derni\xe8re ex\xe9cution \u2192 Artifacts)."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"contributing",children:"Contribution"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Voir CONTRIBUTING.md pour les directives de branches/commits/PR"}),"\n",(0,l.jsx)(s.li,{children:"Astuce : Cr\xe9ez un profil de d\xe9veloppement Thunderbird s\xe9par\xe9 pour les tests afin d\u2019\xe9viter d\u2019impacter votre profil quotidien."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h3,{id:"traductions",children:"Traductions"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Ex\xe9cuter de gros travaux de traduction \xab tout \u2192 tout \xbb peut \xeatre lent et co\xfbteux. Commencez par un sous\u2011ensemble (p. ex., quelques documents et 1\u20132 locales), examinez le r\xe9sultat, puis \xe9tendez."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Politique de nouvelle tentative : les travaux de traduction effectuent jusqu\u2019\xe0 3 nouvelles tentatives avec backoff exponentiel en cas d\u2019erreurs d\u2019API ; voir ",(0,l.jsx)(s.code,{children:"scripts/translate_web_docs_batch.js"})," et ",(0,l.jsx)(s.code,{children:"scripts/translate_web_docs_sync.js"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Captures d\u2019\xe9cran pour la documentation"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Stockez les images sous ",(0,l.jsx)(s.code,{children:"website/static/img/"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["R\xe9f\xe9rencez\u2011les en MD/MDX via ",(0,l.jsx)(s.code,{children:"useBaseUrl('/img/<filename>')"})," pour que les chemins fonctionnent avec le ",(0,l.jsx)(s.code,{children:"baseUrl"})," du site."]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Apr\xe8s avoir ajout\xe9 ou renomm\xe9 des images sous ",(0,l.jsx)(s.code,{children:"website/static/img/"}),", confirmez que toutes les r\xe9f\xe9rences utilisent toujours ",(0,l.jsx)(s.code,{children:"useBaseUrl('/img/\u2026')"})," et s\u2019affichent dans un aper\xe7u local.\nFavicons"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Le ",(0,l.jsx)(s.code,{children:"favicon.ico"})," multi\u2011taille est g\xe9n\xe9r\xe9 automatiquement dans tous les chemins de build (Make + scripts) via ",(0,l.jsx)(s.code,{children:"website/scripts/build-favicon.mjs"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Aucune \xe9tape manuelle n\u2019est requise ; mettre \xe0 jour ",(0,l.jsx)(s.code,{children:"icon-*.png"})," suffit.\nAstuce de relecture"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["Gardez ",(0,l.jsx)(s.code,{children:"id"})," du front\u2011matter inchang\xe9 dans les documents traduits ; ne traduisez que ",(0,l.jsx)(s.code,{children:"title"})," et ",(0,l.jsx)(s.code,{children:"sidebar_label"})," lorsqu\u2019ils sont pr\xe9sents."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-clean",children:"clean"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : supprimer les artefacts de build/aper\xe7u locaux."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make clean"})]}),"\n",(0,l.jsx)(s.li,{children:"Supprime (si pr\xe9sents) :"}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"tmp/"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"web-local-preview/"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"website/build/"})}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-commit",children:"commit"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : formater, tester, mettre \xe0 jour le changelog, commit et push."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make commit"})]}),"\n",(0,l.jsxs)(s.li,{children:["D\xe9tails : ex\xe9cute Prettier (\xe9criture), ",(0,l.jsx)(s.code,{children:"make test"}),", ",(0,l.jsx)(s.code,{children:"make test_i18n"})," ; ajoute au changelog lorsqu\u2019il y a des diffs index\xe9s ; pousse vers ",(0,l.jsx)(s.code,{children:"origin/<branch>"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-eslint",children:"eslint"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : ex\xe9cuter ESLint via une configuration plate."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make eslint"})]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-help",children:"help"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : lister toutes les cibles avec une doc en une ligne."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make help"})]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-lint",children:"lint"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : analyser la MailExtension avec ",(0,l.jsx)(s.code,{children:"web-ext"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make lint"})]}),"\n",(0,l.jsxs)(s.li,{children:["Remarques : copies temporaires ",(0,l.jsx)(s.code,{children:"sources/manifest_LOCAL.json"})," \u2192 ",(0,l.jsx)(s.code,{children:"sources/manifest.json"})," ; ignore les ZIP construits ; les avertissements ne font pas \xe9chouer le pipeline."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-menu",children:"menu"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : menu interactif pour s\xe9lectionner une cible Make et des arguments optionnels."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ex\xe9cuter ",(0,l.jsx)(s.code,{children:"make"})," sans argument."]}),"\n",(0,l.jsxs)(s.li,{children:["Remarques : si ",(0,l.jsx)(s.code,{children:"whiptail"})," n\u2019est pas disponible, le menu revient \xe0 ",(0,l.jsx)(s.code,{children:"make help"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-pack",children:"pack"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : construire les ZIP ATN et LOCAL (d\xe9pend de ",(0,l.jsx)(s.code,{children:"lint"}),")."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make pack"})]}),"\n",(0,l.jsxs)(s.li,{children:["Astuce : incr\xe9mentez les versions dans les deux ",(0,l.jsx)(s.code,{children:"sources/manifest_*.json"})," avant l\u2019empaquetage."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-prettier",children:"prettier"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : formater le d\xe9p\xf4t sur place."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make prettier"})]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-prettier_check",children:"prettier_check"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : v\xe9rifier le formatage (sans \xe9criture)."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make prettier_check"})]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-prettier_write",children:"prettier_write"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : alias de ",(0,l.jsx)(s.code,{children:"prettier"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make prettier_write"})]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-test",children:"test"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : ex\xe9cuter Prettier (\xe9criture), ESLint, puis Vitest (couverture si install\xe9)."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make test"})]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-test_i18n",children:"test_i18n"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : tests ax\xe9s i18n pour les cha\xeenes de l\u2019extension et la documentation du site."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make test_i18n"})]}),"\n",(0,l.jsxs)(s.li,{children:["Ex\xe9cute : ",(0,l.jsx)(s.code,{children:"npm run test:i18n"})," et ",(0,l.jsx)(s.code,{children:"npm run -s test:website-i18n"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-translation-app",children:"translate_app / translation_app"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : traduire les cha\xeenes d\u2019UI de l\u2019extension de EN vers d\u2019autres locales."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:'make translation_app OPTS="--locales all|de,fr"'})]}),"\n",(0,l.jsxs)(s.li,{children:["Remarques : pr\xe9serve la structure des cl\xe9s et les espaces r\xe9serv\xe9s ; journalise dans ",(0,l.jsx)(s.code,{children:"translation_app.log"}),". Version script : ",(0,l.jsx)(s.code,{children:"node scripts/translate_app.js --locales \u2026"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-translation-web",children:"translate_web_docs_batch / translate_web_docs_sync"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : traduire la documentation du site de ",(0,l.jsx)(s.code,{children:"website/docs/*.md"})," vers ",(0,l.jsx)(s.code,{children:"website/i18n/<locale>/..."}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Pr\xe9f\xe9r\xe9 : ",(0,l.jsx)(s.code,{children:"translate_web_docs_batch"})," (OpenAI Batch API)","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Utilisation (drapeaux) : ",(0,l.jsx)(s.code,{children:'make translate_web_docs_batch OPTS="--files <doc1,doc2|all> --locales <lang1,lang2|all>"'})]}),"\n",(0,l.jsxs)(s.li,{children:["L\u2019ancienne forme positionnelle est toujours accept\xe9e : ",(0,l.jsx)(s.code,{children:'OPTS="<doc|all> <lang|all>"'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.li,{children:"Comportement : construit le JSONL, t\xe9l\xe9verse, scrute toutes les 30 s, t\xe9l\xe9charge les r\xe9sultats, \xe9crit les fichiers."}),"\n",(0,l.jsx)(s.li,{children:"Remarque : un job batch peut prendre jusqu\u2019\xe0 24 heures (fen\xeatre batch d\u2019OpenAI). La console affiche le temps \xe9coul\xe9 \xe0 chaque sondage."}),"\n",(0,l.jsxs)(s.li,{children:["Env : ",(0,l.jsx)(s.code,{children:"OPENAI_API_KEY"})," (requis), optionnels ",(0,l.jsx)(s.code,{children:"OPENAI_MODEL"}),", ",(0,l.jsx)(s.code,{children:"OPENAI_TEMPERATURE"}),", ",(0,l.jsx)(s.code,{children:"OPENAI_BATCH_WINDOW"})," (par d\xe9faut 24 h), ",(0,l.jsx)(s.code,{children:"BATCH_POLL_INTERVAL_MS"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["H\xe9ritage : ",(0,l.jsx)(s.code,{children:"translate_web_docs_sync"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Utilisation (drapeaux) : ",(0,l.jsx)(s.code,{children:'make translate_web_docs_sync OPTS="--files <doc1,doc2|all> --locales <lang1,lang2|all>"'})]}),"\n",(0,l.jsxs)(s.li,{children:["L\u2019ancienne forme positionnelle est toujours accept\xe9e : ",(0,l.jsx)(s.code,{children:'OPTS="<doc|all> <lang|all>"'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.li,{children:"Comportement : requ\xeates synchrones par paire (pas d\u2019agr\xe9gation batch)."}),"\n",(0,l.jsxs)(s.li,{children:["Remarques : invites interactives lorsque ",(0,l.jsx)(s.code,{children:"OPTS"})," est omis. Les deux modes pr\xe9servent les blocs/inline de code et gardent ",(0,l.jsx)(s.code,{children:"id"})," du front\u2011matter inchang\xe9 ; journalisent dans ",(0,l.jsx)(s.code,{children:"translation_web_batch.log"})," (batch) ou ",(0,l.jsx)(s.code,{children:"translation_web_sync.log"})," (sync)."]}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-translation_web_index",children:"translate_web_index / translation_web_index"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : traduire les cha\xeenes d\u2019UI du site (page d\u2019accueil, barre de navigation, pied de page) de ",(0,l.jsx)(s.code,{children:"website/i18n/en/code.json"})," vers toutes les locales sous ",(0,l.jsx)(s.code,{children:"website/i18n/<locale>/code.json"})," (en excluant ",(0,l.jsx)(s.code,{children:"en"}),")."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make translate_web_index"})," ou ",(0,l.jsx)(s.code,{children:'make translate_web_index OPTS="--locales de,fr [--force]"'})]}),"\n",(0,l.jsxs)(s.li,{children:["Exigences : exporter ",(0,l.jsx)(s.code,{children:"OPENAI_API_KEY"})," (optionnel : ",(0,l.jsx)(s.code,{children:"OPENAI_MODEL=gpt-4o-mini"}),")."]}),"\n",(0,l.jsx)(s.li,{children:"Comportement : valide la structure JSON, pr\xe9serve les espaces r\xe9serv\xe9s entre accolades, conserve les URL inchang\xe9es et r\xe9essaie avec feedback en cas d\u2019erreurs de validation."}),"\n"]}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsx)(s.h4,{id:"mt-web_build",children:"web_build"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : construire le site de docs vers ",(0,l.jsx)(s.code,{children:"website/build"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:'make web_build OPTS="--locales en|de,en|all"'})," (ou d\xe9finir ",(0,l.jsx)(s.code,{children:'BUILD_LOCALES="en de"'}),")"]}),"\n",(0,l.jsxs)(s.li,{children:["Internes : ",(0,l.jsx)(s.code,{children:"node ./node_modules/@docusaurus/core/bin/docusaurus.mjs build [--locale \u2026]"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["D\xe9pendances : ex\xe9cute ",(0,l.jsx)(s.code,{children:"npm ci"})," dans ",(0,l.jsx)(s.code,{children:"website/"})," uniquement si ",(0,l.jsx)(s.code,{children:"website/node_modules/@docusaurus"})," est absent."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-web_build_linkcheck",children:"web_build_linkcheck"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : v\xe9rification des liens sans connexion."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:'make web_build_linkcheck OPTS="--locales en|all"'})]}),"\n",(0,l.jsxs)(s.li,{children:["Remarques : construit vers ",(0,l.jsx)(s.code,{children:"tmp_linkcheck_web_pages"})," ; r\xe9\xe9crit ",(0,l.jsx)(s.code,{children:"baseUrl"})," de GH Pages en ",(0,l.jsx)(s.code,{children:"/"})," ; ignore les liens HTTP(S) distants."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-web_build_local_preview",children:"web_build_local_preview"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Objectif : aper\xe7u gh\u2011pages local avec tests/v\xe9rif. des liens optionnels."}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:'make web_build_local_preview OPTS="--locales en|all [--no-test] [--no-link-check] [--dry-run] [--no-serve]"'})]}),"\n",(0,l.jsxs)(s.li,{children:["Comportement : essaie d\u2019abord le serveur d\u2019aper\xe7u Node (",(0,l.jsx)(s.code,{children:"scripts/preview-server.mjs"}),", prend en charge ",(0,l.jsx)(s.code,{children:"/__stop"}),"), se replie sur ",(0,l.jsx)(s.code,{children:"python3 -m http.server"})," ; sert sur 8080\u20138090 ; PID \xe0 ",(0,l.jsx)(s.code,{children:"web-local-preview/.server.pid"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"mt-web_push_github",children:"web_push_github"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Objectif : pousser ",(0,l.jsx)(s.code,{children:"website/build"})," vers la branche ",(0,l.jsx)(s.code,{children:"gh-pages"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Utilisation : ",(0,l.jsx)(s.code,{children:"make web_push_github"})]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["Astuce : d\xe9finissez ",(0,l.jsx)(s.code,{children:"NPM=\u2026"})," pour remplacer le gestionnaire de paquets utilis\xe9 par le Makefile (par d\xe9faut ",(0,l.jsx)(s.code,{children:"npm"}),")."]}),"\n",(0,l.jsx)(s.hr,{})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,s,n){n.d(s,{R:()=>d,x:()=>t});var i=n(6540);const l={},r=i.createContext(l);function d(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);